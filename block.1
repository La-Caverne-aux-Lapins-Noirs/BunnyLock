.\" ============================================================================
.\" block(1) — verrouilleur d'écran animé
.\" ============================================================================
.TH block 1 "Novembre 2025" "Huile utils" "Verrouilleur d'écran"
.
.SH NAME
block \- verrouilleur d'écran "bunny lock" animé et remplaçable
.
.SH SYNOPSIS
.B block
.RI
.
.SH DESCRIPTION
.B block
verrouille la session locale en occupant tous les écrans avec une animation en
plein écran et en bloquant les périphériques de saisie. Pour déverrouiller,
l'utilisateur connecté doit saisir son mot de passe.
.PP
Un minuteur de 30 minutes démarre au lancement. À l'expiration, il devient
possible d'
.I expulser
l'utilisateur courant par pression sur la touche d'échappement (voir
.SB SECURITY
).
.
.SH INFORMATIONS
À l'écran figurent l'identité de l'utilisateur connecté et le temps restant
avant l'expulsion possible par la touche d'échappement.
.
.SH ENVIRONMENT
.TP
.B BUNNY_LOCK_SCREEN
Chemin absolu d'une bibliothèque dynamique fournissant l'animation personnalisée.
.
.SH EXTENSIONS
Il est possible de remplacer l'animation par défaut via une extension
chargée dynamiquement. Le minuteur et l'affichage du nom d'utilisateur
restent obligatoires et ne peuvent pas être masqués.
.PP
La bibliothèque dynamique pointée par
.B BUNNY_LOCK_SCREEN
doit exposer la structure partagée et le rappel d'affichage suivants :
.PP
.nf
.in +4
typedef struct s_bunny_lock_shared_data {
  t_bunny_window *win[16];
  size_t          nbr_win;
  void           *custom_data;
} t_bunny_lock_shared_data;
.in -4
.fi
.PP
.BI "t_bunny_response bunny_lock_display(t_bunny_lock_shared_data *" lck ");"
.PP
Cette fonction est utilisée comme fonction d'affichage LibLapin. Le programme
.B block
appelle lui-même
.B bunny_display
; ne l'appelez pas depuis votre extension. La fonction doit toujours renvoyer
.B GO_ON
faute de quoi le verrouillage prendra fin.
.
.SH SECURITY
L'« expulsion » déclenchée après expiration du minuteur effectue un envoi généralisé
de signaux à l'ensemble des processus, SIGTERM dans un premier temps et SIGKILL
au bout de quelques secondes.
.
.SH AUTHOR
Par \fBJason Brillante\fR "\fBDamdoshi\fR", \fBPentacle Technologie\fR et \fBEFRITS\fR.
